(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fae2648"],{"4ea5":function(e,t,a){},"5ebf":function(e,t,a){"use strict";a("4ea5")},"7db0":function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").find,n=a("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},"987e":function(e,t,a){"use strict";a("b4ba")},ad30:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"md-layout"},[e._l(e.cards,(function(t,r){return a("div",{key:t.title+r,staticClass:"md-layout-item md-medium-size-50 md-xsmall-size-100 md-size-25"},[a("stats-card",{attrs:{"data-background-color":t.color}},[a("template",{slot:"header"},[a("md-icon",[e._v(e._s(t.icon))])],1),a("template",{slot:"content"},[a("p",{staticClass:"category"},[e._v(e._s(t.title))]),a("h3",{staticClass:"title"},[e._v(e._s(t.value))])])],2)],1)})),a("div",{staticClass:"md-layout-item"},[a("md-card",{staticClass:"px-4"},[a("md-field",[a("label",[e._v("Search by QR Code, Store ID, Name, Brand, AssetType and Model")]),a("md-input",{model:{value:e.initial,callback:function(t){e.initial=t},expression:"initial"}})],1)],1)],1),a("div",{staticClass:"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100"},[a("md-card",[a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-size-15"},[a("md-field",[a("label",{attrs:{for:"movies"}},[e._v("Filter by Region")]),a("md-select",{attrs:{"md-ripple":!1,name:"filterByRegion",id:"filterByRegion",multiple:""},on:{"md-selected":e.filterByRegion},model:{value:e.regions,callback:function(t){e.regions=t},expression:"regions"}},e._l(e.regionOptions,(function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.region))])})),1)],1)],1),a("div",{staticClass:"md-layout-item md-size-15"},[a("md-field",[a("md-select",{attrs:{"md-ripple":!1,name:"country",id:"country",placeholder:"Filter By Country"},on:{"md-selected":e.filterByCountry},model:{value:e.country,callback:function(t){e.country=t},expression:"country"}},e._l(e.countryOptions,(function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.provinceOptions.length,expression:"provinceOptions.length"}],staticClass:"md-layout-item md-size-15"},[a("md-field",[a("md-select",{attrs:{"md-ripple":!1,name:"filterByProvince",id:"filterByProvince",placeholder:"Filter By Province"},on:{"md-selected":e.filterByProvince},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.provinceOptions,(function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.cityOptions.length,expression:"cityOptions.length"}],staticClass:"md-layout-item md-size-15"},[a("md-field",[a("md-select",{attrs:{"md-ripple":!1,name:"filterByCity",id:"filterByCity",placeholder:"Filter By City"},on:{"md-selected":e.filterByCity},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.cityOptions,(function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),a("div",{staticClass:"md-layout-item md-size-20 mt-3"},[a("md-checkbox",{on:{change:e.filterWarehouseOnly},model:{value:e.warehouseOnly,callback:function(t){e.warehouseOnly=t},expression:"warehouseOnly"}},[e._v("Warehouse Only")])],1),a("div",{staticClass:"md-layout-item md-accent md-size-15 mt-2"},[a("md-button",{staticClass:"md-icon-button md-primary md-raised p-2",on:{click:e.clearFilters}},[a("md-icon",[e._v("delete")])],1)],1),a("div",{staticClass:"md-layout-item md-size-15 mt-1"},[a("md-button",{staticClass:"md-raised md-primary",on:{click:e.download}},[e._v("Download")])],1)]),a("simple-table",{attrs:{"table-header-color":"red",items:e.items,fields:e.fields},on:{clicked:e.navigateTo,paginate:e.changePage}})],1)],1)],1)],2)},i=[],n=a("5530"),s=a("1da1"),o=(a("96cf"),a("d81d"),a("b0c0"),a("99af"),a("c740"),a("7db0"),a("159b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",{staticClass:"md-card-stats"},[a("md-card-header",{attrs:{"data-background-color":e.dataBackgroundColor}},[e._t("header")],2),a("md-card-content",[e._t("content")],2)],1)}),c=[],l={name:"stats-card",props:{dataBackgroundColor:{type:String,default:""}}},d=l,u=(a("987e"),a("2877")),m=Object(u["a"])(d,o,c,!1,null,null,null),p=m.exports,h=a("edd5"),g=a("fef9"),y={name:"Locations",components:{StatsCard:p,SimpleTable:h["a"]},props:{},data:function(){return{initial:null,warehouseOnly:!1,regions:[],country:null,province:null,city:null,items:{current_page:1,per_page:10,total:0,data:[]},params:{},regionOptions:[],countryOptions:[],provinceOptions:[],cityOptions:[],cards:[{color:"green",icon:"store",title:"Total Store Locations",key:"total_stores",value:null},{color:"red",icon:"qr_code",title:"Total Store with Asset Codes",key:"total_qr_stores",value:null},{color:"red",icon:"qr_code",title:"Total Asset Codes",key:"total_qr_code",value:null},{color:"red",icon:"qr_code",title:"Total Warehouse Asset Codes",key:"total_warehouse_qr",value:null},{color:"green",icon:"store",title:"Filtered Store Locations",key:"filtered_total_stores",value:null},{color:"red",icon:"qr_code",title:"Filtered Store with Asset Codes",key:"filtered_total_qr_stores",value:null},{color:"red",icon:"qr_code",title:"Filtered Asset Codes",key:"filtered_total_qr_code",value:null},{color:"red",icon:"qr_code",title:"Filtered Warehouse Asset Codes",key:"filtered_total_warehouse_qr",value:null}],fields:[{key:"asset_code",label:"Asset Code",sortable:!1},{key:"store_id",label:"Store ID",sortable:!1},{label:"Store Name",key:"store_name",sortable:!1},{key:"country",label:"Country",sortable:!1},{key:"province",label:"Province",sortable:!1},{key:"city",label:"City",sortable:!1},{key:"address",label:"Address",sortable:!1},{key:"region",label:"Region",sortable:!1}]}},mounted:function(){try{this.getLocationSummary(),this.getRegions(),this.getCountries(),this.getLocationData({page:this.items.current_page,per_page:this.items.per_page})}catch(e){this.error=e,console.log(e)}},methods:{changePage:function(e){this.getLocationData(e)},getLocationData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["g"])(e);case 2:r=a.sent,r.data.length&&(t.items.data=r.data[0].data.data.map((function(e){return{asset_code:e.qr_code,store_id:e.address.id_number,store_uid:e.address.id,store_name:e.address.company_name,country:e.address.country.name||"N/A",province:e.address.province.name||"N/A",city:e.address.city,address:e.address.address,region:e.address.region,locationId:e.id}})),t.items.per_page=r.data[0].data.per_page,t.items.current_page=r.data[0].data.current_page,t.items.total=r.data[0].data.total,t.cards[4].value=r.data[0].total_locations,t.cards[5].value=r.data[0].data.total,t.cards[6].value=r.data[0].total_qr,t.cards[7].value=r.data[0].total_warehouse_qr);case 4:case"end":return a.stop()}}),a)})))()},getCountries:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["f"])();case 2:a=t.sent,a.data.length&&(e.countryOptions=a.data);case 4:case"end":return t.stop()}}),t)})))()},getRegions:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["j"])();case 2:a=t.sent,a.data.length&&(e.regionOptions=a.data);case 4:case"end":return t.stop()}}),t)})))()},getLocationSummary:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["i"])();case 2:a=t.sent,a.data.length&&(e.cards=e.cards.map((function(e){return e.value=a.data[0][e.key],e})));case 4:case"end":return t.stop()}}),t)})))()},getCity:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["e"])(e);case 2:r=a.sent,r.data.length&&(t.cityOptions=r.data[0].data);case 4:case"end":return a.stop()}}),a)})))()},navigateTo:function(e){var t=this.items.data[e.index].locationId;if("asset_code"===e.name){var a=this.items.data[e.index].asset_code;this.$router.push({path:"qr/".concat(a,"/").concat(t)})}if("store_id"===e.name){var r=this.items.data[e.index].store_uid;this.$router.push({path:"store/".concat(r)})}},filterByCountry:function(e){if(e){var t=this.countryOptions.findIndex((function(t){return t.id===e}));t>-1&&(this.provinceOptions=this.countryOptions[t].provinces),this.params=Object(n["a"])(Object(n["a"])({},this.params),{},{country:e}),this.getLocationData(Object(n["a"])({page:1,per_page:this.items.per_page},this.params))}},filterByProvince:function(e){if(e){var t=this.provinceOptions.find((function(t){return t.id===e}));t&&t.id&&(this.params=Object(n["a"])(Object(n["a"])({},this.params),{},{province:e}),this.getLocationData(Object(n["a"])({page:1,per_page:this.items.per_page},this.params)),this.getCity(e))}},filterByRegion:function(e){var t=this;e.length&&(e.forEach((function(e,a){t.params["region[".concat(a,"]")]=e})),this.getLocationData(Object(n["a"])({page:1,per_page:this.items.per_page},this.params)))},filterByCity:function(e){e&&(this.params=Object(n["a"])(Object(n["a"])({},this.params),{},{city:e}),this.getLocationData(Object(n["a"])({page:1,per_page:this.items.per_page},this.params)))},filterWarehouseOnly:function(e){this.params=Object(n["a"])(Object(n["a"])({},this.params),{},{warehouse_only:e}),this.getLocationData(Object(n["a"])({page:1,per_page:this.items.per_page},this.params))},clearFilters:function(){this.params={},this.regions=[],this.country=null,this.province=null,this.city=null,this.warehouseOnly=!1,this.initial=null,this.getLocationData(Object(n["a"])({page:1,per_page:this.items.per_page},this.params))},download:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["b"])(Object(n["a"])({page:e.items.current_page,per_page:e.items.per_page},e.params));case 2:a=t.sent,"OK"===a.statusText&&(r=document.createElement("a"),i=new Blob([a.data],{type:"application/octet-stream"}),r.href=window.URL.createObjectURL(i),r.download="locations.xlsx",r.click());case 4:case"end":return t.stop()}}),t)})))()}},watch:{initial:{handler:function(e){var t=this;console.log(e),setTimeout((function(){t.params=Object(n["a"])(Object(n["a"])({},t.params),{},{q:e}),t.getLocationData(Object(n["a"])({page:1,per_page:t.items.per_page},t.params))}),1e3)}}}},f=y,v=(a("5ebf"),Object(u["a"])(f,r,i,!1,null,null,null));t["default"]=v.exports},b4ba:function(e,t,a){},c740:function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").findIndex,n=a("44d2"),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)}}]);
//# sourceMappingURL=chunk-4fae2648.3b4c2240.js.map