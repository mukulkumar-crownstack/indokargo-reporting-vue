(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05035f75"],{cdc7:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100"},[a("md-card",[a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-size-15"},[a("md-field",[a("label",[e._v("Search by Job No.")]),a("md-input",{model:{value:e.initial,callback:function(t){e.initial=t},expression:"initial"}})],1)],1),a("div",{staticClass:"md-layout-item md-size-15"},[a("md-field",[a("label",{attrs:{for:"movies"}},[e._v("Filter by Region")]),a("md-select",{attrs:{"md-ripple":!1,name:"filterByRegion",id:"filterByRegion",multiple:""},on:{"md-selected":e.filterByRegion},model:{value:e.regions,callback:function(t){e.regions=t},expression:"regions"}},e._l(e.regionOptions,(function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.region))])})),1)],1)],1),a("div",{staticClass:"md-layout-item md-size-15"},[a("md-datepicker",{attrs:{"md-immediately":""},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),a("div",{staticClass:"md-layout-item md-size-15"},[a("md-datepicker",{attrs:{"md-immediately":""},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),a("div",{staticClass:"md-layout-item md-accent md-size-15 mt-2"},[a("md-button",{staticClass:"md-icon-button md-primary md-raised p-2",on:{click:e.clearFilters}},[a("md-icon",[e._v("delete")])],1)],1),a("div",{staticClass:"md-layout-item md-size-15 mt-1"},[a("md-button",{staticClass:"md-raised md-primary",on:{click:e.download}},[e._v("Download")])],1)]),a("simple-table",{attrs:{"table-header-color":"red",items:e.items,fields:e.fields},on:{paginate:e.changePage}})],1)],1)],1)])},n=[],i=a("5530"),r=a("1da1"),d=(a("96cf"),a("d81d"),a("99af"),a("b0c0"),a("159b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("edd5")),o=a("fef9"),c=a("fa7d"),l={name:"MovedJobs",components:{SimpleTable:d["a"]},props:{},data:function(){return{items:{current_page:1,per_page:10,data:[]},params:{},regionOptions:[],q:null,regions:[],startDate:Object(c["a"])(new Date,"yyyy-MM-dd"),endDate:Object(c["a"])(new Date,"yyyy-MM-dd"),initial:null,store:{id_number:null},fields:[{key:"job_number",label:"Job Number",sortable:!1},{key:"asset_code",label:"Asset Code",sortable:!1},{key:"created_at",label:"Created At",sortable:!1},{key:"from",label:"From",sortable:!1},{key:"to",label:"To",sortable:!1},{key:"driver",label:"Driver",sortable:!1}]}},mounted:function(){try{this.generateList({page:this.items.current_page,per_page:this.items.per_page,status:"completed"}),this.getRegions()}catch(e){this.error=e,console.log(e)}},computed:{dateFormat:function(){return this.$material.locale.dateFormat||"yyyy-MM-dd"}},methods:{changePage:function(e){this.generateList(e)},generateList:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["c"])(e);case 2:s=a.sent,s.data.length&&(t.items.data=s.data[0].data.map((function(e){var t;return{job_number:e.assigned_job.job.sn||"N/A",asset_code:e.qr_code||"N/A",created_at:Object(c["a"])(e.created_at),from:null!=e.source_address?null!=e.source_address&&null!=e.destination_address?e.source_address.id_number&&e.source_address.company_name?"".concat(e.source_address.id_number," - ").concat(e.source_address.company_name):"":"System":"",to:null!=e.destination_address?null!=e.source_address&&null!=e.destination_address?null!==(t=e.destination_address)&&void 0!==t&&t.id_number&&e.destination_address.company_name?"".concat(e.destination_address.id_number," - ").concat(e.destination_address.company_name):"":"System":"",driver:e.assigned_job.driver?e.assigned_job.driver.name:"N/A"}})),t.items.per_page=s.data[0].per_page,t.items.current_page=s.data[0].current_page,t.items.total=s.data[0].total);case 4:case"end":return a.stop()}}),a)})))()},getRegions:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["j"])();case 2:a=t.sent,a.data.length&&(e.regionOptions=a.data);case 4:case"end":return t.stop()}}),t)})))()},filterByRegion:function(e){var t=this;e.length&&(e.forEach((function(e,a){t.params["region[".concat(a,"]")]=e})),this.generateList(Object(i["a"])({page:1,per_page:this.items.per_page,status:"completed"},this.params)))},clearFilters:function(){this.params={},this.initial=null,this.regions=[],this.startDate=null,this.endDate=null,this.generateList(Object(i["a"])({page:1,per_page:this.items.per_page,status:"completed"},this.params))},download:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["a"])(Object(i["a"])({page:e.items.current_page,per_page:e.items.per_page,status:"completed"},e.params));case 2:a=t.sent,console.log(a),"OK"===a.statusText&&(s=document.createElement("a"),n=new Blob([a.body],{type:"application/octet-stream"}),s.href=window.URL.createObjectURL(n),s.download="moved_jobs.xlsx",s.click());case 5:case"end":return t.stop()}}),t)})))()}},watch:{initial:{handler:function(e){var t=this;console.log(e),setTimeout((function(){t.params=Object(i["a"])(Object(i["a"])({},t.params),{},{q:e}),t.generateList(Object(i["a"])({page:1,per_page:t.items.per_page,status:"completed"},t.params))}),1e3)}},startDate:{handler:function(e){this.params=Object(i["a"])(Object(i["a"])({},this.params),{},{startDate:e}),this.generateList(Object(i["a"])({page:1,per_page:this.items.per_page,status:"completed"},this.params))}},endDate:{handler:function(e){console.log(e),this.params=Object(i["a"])(Object(i["a"])({},this.params),{},{endDate:e}),this.generateList(Object(i["a"])({page:1,per_page:this.items.per_page,status:"completed"},this.params))}}}},m=l,u=(a("fceb"),a("2877")),p=Object(u["a"])(m,s,n,!1,null,null,null);t["default"]=p.exports},e1a8:function(e,t,a){},fceb:function(e,t,a){"use strict";a("e1a8")}}]);
//# sourceMappingURL=chunk-05035f75.1c807ab7.js.map