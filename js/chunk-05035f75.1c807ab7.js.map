{"version":3,"sources":["webpack:///./src/views/moved-jobs/MovedJobs.vue?384d","webpack:///src/views/moved-jobs/MovedJobs.vue","webpack:///./src/views/moved-jobs/MovedJobs.vue?4ad0","webpack:///./src/views/moved-jobs/MovedJobs.vue?8b1d","webpack:///./src/views/moved-jobs/MovedJobs.vue?8f30"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","model","value","callback","$$v","initial","expression","attrs","on","filterByRegion","regions","_l","region","key","id","_s","startDate","endDate","clearFilters","download","items","fields","changePage","staticRenderFns","name","components","props","data","label","sortable","mounted","generateList","page","current_page","per_page","status","getRegions","error","err","console","log","computed","dateFormat","$material","locale","methods","length","forEach","params","watch","handler","val","setTimeout","component"],"mappings":"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","file":"js/chunk-05035f75.1c807ab7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"md-layout\"},[_c('div',{staticClass:\"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100\"},[_c('md-card',[_c('md-card-content',[_c('div',{staticClass:\"md-layout md-gutter\"},[_c('div',{staticClass:\"md-layout-item md-size-15\"},[_c('md-field',[_c('label',[_vm._v(\"Search by Job No.\")]),_c('md-input',{model:{value:(_vm.initial),callback:function ($$v) {_vm.initial=$$v},expression:\"initial\"}})],1)],1),_c('div',{staticClass:\"md-layout-item md-size-15\"},[_c('md-field',[_c('label',{attrs:{\"for\":\"movies\"}},[_vm._v(\"Filter by Region\")]),_c('md-select',{attrs:{\"md-ripple\":false,\"name\":\"filterByRegion\",\"id\":\"filterByRegion\",\"multiple\":\"\"},on:{\"md-selected\":_vm.filterByRegion},model:{value:(_vm.regions),callback:function ($$v) {_vm.regions=$$v},expression:\"regions\"}},_vm._l((_vm.regionOptions),function(region){return _c('md-option',{key:region.id,attrs:{\"value\":region.id}},[_vm._v(_vm._s(region.region))])}),1)],1)],1),_c('div',{staticClass:\"md-layout-item md-size-15\"},[_c('md-datepicker',{attrs:{\"md-immediately\":\"\"},model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}})],1),_c('div',{staticClass:\"md-layout-item md-size-15\"},[_c('md-datepicker',{attrs:{\"md-immediately\":\"\"},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1),_c('div',{staticClass:\"md-layout-item md-accent md-size-15 mt-2\"},[_c('md-button',{staticClass:\"md-icon-button md-primary md-raised p-2\",on:{\"click\":_vm.clearFilters}},[_c('md-icon',[_vm._v(\"delete\")])],1)],1),_c('div',{staticClass:\"md-layout-item md-size-15 mt-1\"},[_c('md-button',{staticClass:\"md-raised md-primary\",on:{\"click\":_vm.download}},[_vm._v(\"Download\")])],1)]),_c('simple-table',{attrs:{\"table-header-color\":\"red\",\"items\":_vm.items,\"fields\":_vm.fields},on:{\"paginate\":_vm.changePage}})],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"md-layout\">\r\n    <div\r\n      class=\"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100\"\r\n    >\r\n      <md-card>\r\n        <md-card-content>\r\n          <div class=\"md-layout md-gutter\">\r\n            <div class=\"md-layout-item md-size-15\">\r\n              <md-field>\r\n                <label>Search by Job No.</label>\r\n                <md-input v-model=\"initial\"></md-input>\r\n              </md-field>\r\n            </div>\r\n            <div class=\"md-layout-item md-size-15\">\r\n              <md-field>\r\n                <label for=\"movies\">Filter by Region</label>\r\n                <md-select\r\n                  :md-ripple=\"false\"\r\n                  v-model=\"regions\"\r\n                  @md-selected=\"filterByRegion\"\r\n                  name=\"filterByRegion\"\r\n                  id=\"filterByRegion\"\r\n                  multiple\r\n                >\r\n                  <md-option\r\n                    v-for=\"region in regionOptions\"\r\n                    :key=\"region.id\"\r\n                    :value=\"region.id\"\r\n                    >{{ region.region }}</md-option\r\n                  >\r\n                </md-select>\r\n              </md-field>\r\n            </div>\r\n            <div class=\"md-layout-item md-size-15\">\r\n              <md-datepicker v-model=\"startDate\" md-immediately />\r\n            </div>\r\n            <div class=\"md-layout-item md-size-15\">\r\n              <md-datepicker v-model=\"endDate\" md-immediately />\r\n            </div>\r\n            <div class=\"md-layout-item md-accent md-size-15 mt-2\">\r\n              <md-button\r\n                @click=\"clearFilters\"\r\n                class=\"md-icon-button md-primary md-raised p-2\"\r\n              >\r\n                <md-icon>delete</md-icon>\r\n              </md-button>\r\n            </div>\r\n            <div class=\"md-layout-item md-size-15 mt-1\">\r\n              <md-button @click=\"download\" class=\"md-raised md-primary\"\r\n                >Download</md-button\r\n              >\r\n            </div>\r\n          </div>\r\n          <simple-table\r\n            table-header-color=\"red\"\r\n            :items=\"items\"\r\n            :fields=\"fields\"\r\n            v-on:paginate=\"changePage\"\r\n          >\r\n            <!-- <template #cell(field1)=\"data\">\r\n              {{ data.item.value }}\r\n            </template> -->\r\n          </simple-table>\r\n        </md-card-content>\r\n      </md-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SimpleTable from \"../../components/table/SimpleTable\";\r\nimport { getRegionList } from \"../../services/userService\";\r\nimport { getActiveMovementJobsList } from \"../../services/userService\";\r\nimport { exportJobs } from \"../../services/userService\";\r\nimport { formatDate } from \"../../utils/utils\";\r\n\r\nexport default {\r\n  name: \"MovedJobs\",\r\n  components: { SimpleTable },\r\n  props: {},\r\n  data: () => ({\r\n    items: {\r\n      current_page: 1,\r\n      per_page: 10,\r\n      data: [],\r\n    },\r\n    params: {},\r\n    regionOptions: [],\r\n    q: null,\r\n    regions: [],\r\n    startDate: formatDate(new Date(), \"yyyy-MM-dd\"),\r\n    endDate: formatDate(new Date(), \"yyyy-MM-dd\"),\r\n    initial: null,\r\n    store: {\r\n      id_number: null,\r\n    },\r\n    fields: [\r\n      {\r\n        key: \"job_number\",\r\n        label: \"Job Number\",\r\n        sortable: false,\r\n      },\r\n      {\r\n        key: \"asset_code\",\r\n        label: \"Asset Code\",\r\n        sortable: false,\r\n      },\r\n      {\r\n        key: \"created_at\",\r\n        label: \"Created At\",\r\n        sortable: false,\r\n      },\r\n      {\r\n        key: \"from\",\r\n        label: \"From\",\r\n        sortable: false,\r\n      },\r\n      {\r\n        key: \"to\",\r\n        label: \"To\",\r\n        sortable: false,\r\n      },\r\n      {\r\n        key: \"driver\",\r\n        label: \"Driver\",\r\n        sortable: false,\r\n      },\r\n    ],\r\n  }),\r\n  mounted() {\r\n    try {\r\n      this.generateList({\r\n        page: this.items.current_page,\r\n        per_page: this.items.per_page,\r\n        status: \"completed\",\r\n      });\r\n      this.getRegions();\r\n    } catch (err) {\r\n      this.error = err;\r\n      console.log(err);\r\n    }\r\n  },\r\n  computed: {\r\n    dateFormat() {\r\n      return this.$material.locale.dateFormat || \"yyyy-MM-dd\";\r\n    },\r\n  },\r\n  methods: {\r\n    changePage(page) {\r\n      this.generateList(page);\r\n    },\r\n    async generateList(pageObj) {\r\n      const movedJobsListRes = await getActiveMovementJobsList(pageObj);\r\n      if (movedJobsListRes.data.length) {\r\n        this.items.data = movedJobsListRes.data[0].data.map((element) => {\r\n          return {\r\n            job_number: element.assigned_job.job.sn || \"N/A\",\r\n            asset_code: element.qr_code || \"N/A\",\r\n            created_at: formatDate(element.created_at),\r\n            from:\r\n              element.source_address != null\r\n                ? element.source_address != null &&\r\n                  element.destination_address != null\r\n                  ? element.source_address.id_number &&\r\n                    element.source_address.company_name\r\n                    ? `${element.source_address.id_number} - ${element.source_address.company_name}`\r\n                    : \"\"\r\n                  : \"System\"\r\n                : \"\",\r\n            to:\r\n              element.destination_address != null\r\n                ? element.source_address != null &&\r\n                  element.destination_address != null\r\n                  ? element.destination_address?.id_number &&\r\n                    element.destination_address.company_name\r\n                    ? `${element.destination_address.id_number} - ${element.destination_address.company_name}`\r\n                    : \"\"\r\n                  : \"System\"\r\n                : \"\",\r\n            driver: element.assigned_job.driver\r\n              ? element.assigned_job.driver.name\r\n              : \"N/A\",\r\n          };\r\n        });\r\n        this.items.per_page = movedJobsListRes.data[0].per_page;\r\n        this.items.current_page = movedJobsListRes.data[0].current_page;\r\n        this.items.total = movedJobsListRes.data[0].total;\r\n      }\r\n    },\r\n    async getRegions() {\r\n      const regionRes = await getRegionList();\r\n      if (regionRes.data.length) {\r\n        this.regionOptions = regionRes.data;\r\n      }\r\n    },\r\n    filterByRegion(region) {\r\n      if (region.length) {\r\n        region.forEach((id, idx) => {\r\n          this.params[`region[${idx}]`] = id;\r\n        });\r\n        this.generateList({\r\n          page: 1,\r\n          per_page: this.items.per_page,\r\n          status: \"completed\",\r\n          ...this.params,\r\n        });\r\n      }\r\n    },\r\n    clearFilters() {\r\n      this.params = {};\r\n      this.initial = null;\r\n      this.regions = [];\r\n      this.startDate = null;\r\n      this.endDate = null;\r\n      this.generateList({\r\n        page: 1,\r\n        per_page: this.items.per_page,\r\n        status: \"completed\",\r\n        ...this.params,\r\n      });\r\n    },\r\n    async download() {\r\n      const exportRes = await exportJobs({\r\n        page: this.items.current_page,\r\n        per_page: this.items.per_page,\r\n        status: \"completed\",\r\n        ...this.params,\r\n      });\r\n      console.log(exportRes)\r\n      if (exportRes.statusText === 'OK') {\r\n        var link = document.createElement(\"a\");\r\n        const blob = new Blob([exportRes.body], {\r\n          type: \"application/octet-stream\",\r\n        });\r\n        link.href = window.URL.createObjectURL(blob);\r\n        link.download = \"moved_jobs.xlsx\";\r\n        link.click();\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    initial: {\r\n      handler: function (val) {\r\n        console.log(val);\r\n        setTimeout(() => {\r\n          this.params = { ...this.params, q: val };\r\n          this.generateList({\r\n            page: 1,\r\n            per_page: this.items.per_page,\r\n            status: \"completed\",\r\n            ...this.params,\r\n          });\r\n        }, 1000);\r\n      },\r\n    },\r\n    startDate: {\r\n      handler: function (val) {\r\n        this.params = { ...this.params, startDate: val };\r\n        this.generateList({\r\n          page: 1,\r\n          per_page: this.items.per_page,\r\n          status: \"completed\",\r\n          ...this.params,\r\n        });\r\n      },\r\n    },\r\n    endDate: {\r\n      handler: function (val) {\r\n        console.log(val);\r\n        this.params = { ...this.params, endDate: val };\r\n        this.generateList({\r\n          page: 1,\r\n          per_page: this.items.per_page,\r\n          status: \"completed\",\r\n          ...this.params,\r\n        });\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.md-app-content {\r\n  background: #eee;\r\n}\r\n.md-menu-content {\r\n  background: #fff;\r\n  margin-top: 48px;\r\n  /* max-width: 280px !important; */\r\n}\r\n.md-ripple > span {\r\n  left: 50px;\r\n  top: 16px;\r\n}\r\n.md-datepicker-dialog {\r\n  background: white;\r\n}\r\n</style>\r\n ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MovedJobs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MovedJobs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MovedJobs.vue?vue&type=template&id=d8779754&\"\nimport script from \"./MovedJobs.vue?vue&type=script&lang=js&\"\nexport * from \"./MovedJobs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MovedJobs.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MovedJobs.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}